## Introduction

This repository contains a [CQL](https://cql.hl7.org/) engine that is based on the [CQL reference implementation](https://github.com/cqframework/clinical_quality_language) and adapted to work with clinical in databases which conform to the [OMOP Common Data Model](https://www.ohdsi.org/data-standardization/).
Some of the code in this repository has been generated by the [cql-on-omop code generator](https://github.com/umg-minai/cql-on-omop-code-generator).

At the moment, the only interface is an interactive REPL.

## Usage

Compile the project with

```bash
mvn package
```

then start the REPL component and connect to a database

```bash
CQL_ON_OMOP_DATABASE_PASSWORD=$(GET-PASSWORD) java -jar REPOSITORY-DIRECTORY/target/cql-on-omop-1.0-SNAPSHOT.jar \
  -p DATABASE_SERVER_PORT -u DATABASE_USERNAME -d DATABASE-NAME
```

Within the REPL, evaluate CQL expressions:

```[
[0] [VisitOccurrence]
E1 => List<VisitOccurrence>
  VisitOccurrence{id=30518, concept='Inpatient Visit'}
  VisitOccurrence{id=30519, concept='Inpatient Visit'}
  VisitOccurrence{id=30520, concept='Intensive Care'}
  ...
```
